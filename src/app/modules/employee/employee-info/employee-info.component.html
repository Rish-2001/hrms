<app-employee-sub-header></app-employee-sub-header>

<div class="full-container">
    <div class="section-container">
        <div class="section-heading-container">
            <h2>Work Experience</h2>
            <span>{{workExpArr.length}} records found</span>
        </div>

        <hr>

        <div class="round-button"
            style="position:absolute; top:0px;right:0px; width:50px; z-index: 2; margin-right: -25px; margin-top: -25px;">
            <div class="round-button-container" style="position: relative;">
                <button mat-fab extended
                    aria-label="Button that displays a tooltip in various positions" color="warn"
                    (focus)="isMainDropdownActive = true" (blur)="onMainDropBtnBlur()" style="z-index: 2;">
                    <i class="fas fa-plus fa-2x" style="color: rgba(10, 253, 253, 0.773);"></i>
                </button>

                <div (blur)="isMainDropdownActive=false"
                    [ngClass]="{'dropdown-container': true, 'dropdown-container-active': isMainDropdownActive}">
                    <ul class="dropdown-list">
                        <li><button (click)="openSkillModal()">Skill</button></li>
                        <li><button (click)="openLangModal()">Language</button></li>
                        <li><button (click)="openWorkExpModal()">Work Experience</button></li>
                        <li><button (click)="openCertModal()">Certification</button></li>
                        <li><button (click)="openEducationModal()">Education</button></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="table-container">
            <table *ngIf="workExpArr.length > 0" class="table align-middle mb-0 bg-white">
                <thead class="bg-light" style="z-index: 1; margin: 0; position: sticky; top: 0;">
                    <tr>
                        <th>
                            <input mdbCheckbox class="form-check-input" type="checkbox" id="checkboxNoLabel"
                                aria-label="..." (change)="selectAllWorkExp()" />
                        </th>
                        <th> Company<i class="fa fa-arrow-up"></i></th>
                        <th>Job Title</th>
                        <th>From</th>
                        <th>To</th>
                        <th>Action</th>
                    </tr>
                </thead>


                <tbody>
                    <tr *ngFor="let workExp of workExpArr; let i = index">
                        <td>
                            <div>
                                <input mdbCheckbox class="form-check-input" type="checkbox" id="checkboxNoLabel"
                                    aria-label="..." [checked]="workExp.isSelected"
                                    (change)="workExp.isSelected = !workExp.isSelected" />
                            </div>
                        </td>
                        <td>{{workExp.company}}</td>
                        <td>{{workExp.jobTitle}}</td>
                        <td>{{workExp.fromDate}}</td>
                        <td>{{workExp.toDate}}</td>
                        <td>
                            <div class="table-dropdown">
                                <button class="table-dropdown-toggle-btn" (focus)="workExp.isDropDownOpen = true"
                                    (blur)="onTableDropBtnBlur(i, workExpArr)">
                                    <i class="fa-solid fa-ellipsis-vertical fa-lg"></i>
                                </button>
                                <div
                                    [ngClass]="{'table-dropdown-container': true, 'table-dropdown-container-active': workExp.isDropDownOpen}">
                                    <ul>
                                        <li>
                                            <button class="table-dropdown-btn" (click)="openEditWorkExpModal(i)">
                                                <i class="fa-solid fa-pen-to-square"></i>
                                                Edit
                                            </button>
                                        </li>
                                        <li>
                                            <button class="table-dropdown-btn">
                                                <i class="fa-solid fa-trash"></i>
                                                Delete
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>

    <div class="section-container section-container-secondary">
        <div class="section-heading-container">
            <h2>Skills</h2>
            <span>{{skillsArr.length}} records found</span>
        </div>

        <hr>

        <div class="table-container">
            <table *ngIf="skillsArr.length > 0" class="table align-middle mb-0 bg-white">
                <thead class="bg-light" style="z-index: 1; margin: 0; position: sticky; top: 0;">
                    <tr>
                        <th>
                            <input mdbCheckbox class="form-check-input" type="checkbox" id="checkboxNoLabel"
                                aria-label="..." (change)="selectAllSkills()" />
                        </th>
                        <th> Skill<i class="fa fa-arrow-up"></i></th>
                        <th>Years of Experience</th>
                        <th>Action</th>
                    </tr>
                </thead>


                <tbody>
                    <tr *ngFor="let skill of skillsArr; let i = index">
                        <td>
                            <div>
                                <input mdbCheckbox class="form-check-input" type="checkbox" id="checkboxNoLabel"
                                    aria-label="..." [checked]="skill.isSelected"
                                    (change)="skill.isSelected = !skill.isSelected" />
                            </div>
                        </td>
                        <td>{{skill.skill}}</td>
                        <td>{{skill.exp}}</td>
                        <td>
                            <div class="table-dropdown">
                                <button class="table-dropdown-toggle-btn" (focus)="skill.isDropDownOpen = true"
                                    (blur)="onTableDropBtnBlur(i, skillsArr)">
                                    <i class="fa-solid fa-ellipsis-vertical fa-lg"></i>
                                </button>
                                <div
                                    [ngClass]="{'table-dropdown-container': true, 'table-dropdown-container-active': skill.isDropDownOpen}">
                                    <ul>
                                        <li>
                                            <button class="table-dropdown-btn" (click)="openEditSkillModal(i)">
                                                <i class="fa-solid fa-pen-to-square"></i>
                                                Edit
                                            </button>
                                        </li>
                                        <li>
                                            <button class="table-dropdown-btn">
                                                <i class="fa-solid fa-trash"></i>
                                                Delete
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="section-container">
        <div class="section-heading-container">
            <h2>Language</h2>
            <span>{{langArr.length}} records found</span>
        </div>

        <hr>

        <div class="table-container">
            <table *ngIf="langArr.length > 0" class="table align-middle mb-0 bg-white">
                <thead class="bg-light" style="z-index: 1; margin: 0; position: sticky; top: 0;">
                    <tr>
                        <th>
                            <input mdbCheckbox class="form-check-input" type="checkbox" id="checkboxNoLabel"
                                aria-label="..." (change)="selectAllLang()" />
                        </th>
                        <th> Language<i class="fa fa-arrow-up"></i></th>
                        <th>Skill</th>
                        <th>Frequency</th>
                        <th>Action</th>
                    </tr>
                </thead>


                <tbody>
                    <tr *ngFor="let lang of langArr; let i = index">
                        <td>
                            <div>
                                <input mdbCheckbox class="form-check-input" type="checkbox" id="checkboxNoLabel"
                                    aria-label="..." [checked]="lang.isSelected"
                                    (change)="lang.isSelected = !lang.isSelected" />
                            </div>
                        </td>
                        <td>{{lang.lang}}</td>
                        <td>{{lang.skill}}</td>
                        <td>{{lang.fluency}}</td>
                        <td>
                            <div class="table-dropdown">
                                <button class="table-dropdown-toggle-btn" (focus)="lang.isDropDownOpen = true"
                                    (blur)="onTableDropBtnBlur(i, langArr)">
                                    <i class="fa-solid fa-ellipsis-vertical fa-lg"></i>
                                </button>
                                <div
                                    [ngClass]="{'table-dropdown-container': true, 'table-dropdown-container-active': lang.isDropDownOpen}">
                                    <ul>
                                        <li>
                                            <button class="table-dropdown-btn" (click)="openEditLangModal(i)">
                                                <i class="fa-solid fa-pen-to-square"></i>
                                                Edit
                                            </button>
                                        </li>
                                        <li>
                                            <button class="table-dropdown-btn">
                                                <i class="fa-solid fa-trash"></i>
                                                Delete
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
    </div>

    <div class="section-container">
        <div class="section-heading-container">
            <h2>Certifications</h2>
            <span>{{certArr.length}} records found</span>
        </div>

        <hr>

        <div class="table-container">
            <table *ngIf="certArr.length > 0" class="table align-middle mb-0 bg-white">
                <thead class="bg-light" style="z-index: 1; margin: 0; position: sticky; top: 0;">
                    <tr>
                        <th>
                            <input mdbCheckbox class="form-check-input" type="checkbox" id="checkboxNoLabel"
                                aria-label="..." (change)="selectAllCert()" />
                        </th>
                        <th> Skill<i class="fa fa-arrow-up"></i></th>
                        <th>Years of Experience</th>
                        <th>Action</th>
                    </tr>
                </thead>


                <tbody>
                    <tr *ngFor="let cert of certArr; let i = index">
                        <td>
                            <div>
                                <input mdbCheckbox class="form-check-input" type="checkbox" id="checkboxNoLabel"
                                    aria-label="..." [checked]="cert.isSelected"
                                    (change)="cert.isSelected = !cert.isSelected" />
                            </div>
                        </td>
                        <td>{{cert.skill}}</td>
                        <td>{{cert.exp}}</td>
                        <td>
                            <div class="table-dropdown">
                                <button class="table-dropdown-toggle-btn" (focus)="cert.isDropDownOpen = true"
                                    (blur)="onTableDropBtnBlur(i, certArr)">
                                    <i class="fa-solid fa-ellipsis-vertical fa-lg"></i>
                                </button>
                                <div
                                    [ngClass]="{'table-dropdown-container': true, 'table-dropdown-container-active': cert.isDropDownOpen}">
                                    <ul>
                                        <li>
                                            <button class="table-dropdown-btn" (click)="openEditCertModal(i)">
                                                <i class="fa-solid fa-pen-to-square"></i>
                                                Edit
                                            </button>
                                        </li>
                                        <li>
                                            <button class="table-dropdown-btn">
                                                <i class="fa-solid fa-trash"></i>
                                                Delete
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>

    <div class="section-container">
        <div class="section-heading-container">
            <h2>Education</h2>
            <span>{{eductaionArr.length}} records found</span>
        </div>

        <hr>

        <div class="table-container">
            <table *ngIf="eductaionArr.length > 0" class="table align-middle mb-0 bg-white">
                <thead class="bg-light" style="z-index: 1; margin: 0; position: sticky; top: 0;">
                    <tr>
                        <th>
                            <input mdbCheckbox class="form-check-input" type="checkbox" id="checkboxNoLabel"
                                aria-label="..." (change)="selectAllEducation()" />
                        </th>
                        <th> Level<i class="fa fa-arrow-up"></i></th>
                        <th>Institute</th>
                        <th>Major</th>
                        <th>Year</th>
                        <th>Score</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Action</th>
                    </tr>
                </thead>


                <tbody>
                    <tr *ngFor="let education of eductaionArr; let i = index">
                        <td>
                            <div>
                                <input mdbCheckbox class="form-check-input" type="checkbox" id="checkboxNoLabel"
                                    aria-label="..." [checked]="education.isSelected"
                                    (change)="education.isSelected = !education.isSelected" />
                            </div>
                        </td>
                        <td>{{education.level}}</td>
                        <td>{{education.institute}}</td>
                        <td>{{education.major}}</td>
                        <td>{{education.year}}</td>
                        <td>{{education.score}}</td>
                        <td>{{education.startDate}}</td>
                        <td>{{education.endDate}}</td>
                        <td>
                            <div class="table-dropdown">
                                <button class="table-dropdown-toggle-btn" (focus)="education.isDropDownOpen = true"
                                    (blur)="onTableDropBtnBlur(i, eductaionArr)">
                                    <i class="fa-solid fa-ellipsis-vertical fa-lg"></i>
                                </button>
                                <div
                                    [ngClass]="{'table-dropdown-container': true, 'table-dropdown-container-active': education.isDropDownOpen}">
                                    <ul>
                                        <li>
                                            <button class="table-dropdown-btn" (click)="openEditEducationModal(i)">
                                                <i class="fa-solid fa-pen-to-square"></i>
                                                Edit
                                            </button>
                                        </li>
                                        <li>
                                            <button class="table-dropdown-btn">
                                                <i class="fa-solid fa-trash"></i>
                                                Delete
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
  </div>
</div>